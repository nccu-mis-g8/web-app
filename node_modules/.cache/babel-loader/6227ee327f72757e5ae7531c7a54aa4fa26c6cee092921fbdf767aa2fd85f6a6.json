{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\gp-web-app\\\\frontend\\\\src\\\\components\\\\upload\\\\CheckStatusMainFrame.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { redirect } from \"react-router-dom\";\nimport nextImg from \"../../images/goBack_white.png\";\nimport default_avatar from \"../../images/default_avatar.png\";\nimport { checkModelStatus } from \"../../utils/uploadUtils\";\nimport { refresh } from \"../../utils/tokenUtils\";\nimport classes from \"./CheckStatusMainFrame.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CheckStatusMainFrame({\n  name,\n  avatar,\n  id\n}) {\n  _s();\n  const [isUploaded, setIsUploaded] = useState(false);\n  const [isTraining, setIsTraining] = useState(false);\n  const [startTime, setStartTime] = useState(\"\");\n  const [finishTime, setFinishTime] = useState(\"\");\n  if (avatar === \"\") {\n    avatar = default_avatar;\n  }\n  useEffect(() => {\n    async function fetchModelStatus() {\n      try {\n        const response = await checkModelStatus(id);\n        const accessToken = localStorage.getItem(\"accessToken\");\n        if (response.status === 200) {\n          const responseData = await response.json();\n          const isTrained = responseData.is_trained;\n          const startTrain = responseData.start_train;\n          const startTime = responseData.model_start_time;\n          const finishTime = responseData.model_end_time;\n          setIsUploaded(true);\n          setIsTraining(startTrain);\n          setStartTime(startTime);\n          setFinishTime(finishTime);\n        } else if (response.status === 404) {\n          setIsUploaded(false);\n          setIsTraining(false);\n        } else if (response.status === 401 && accessToken) {\n          // access Token過期，用refresh Token去拿新的access Token\n          const checkReTokenStatus = await refresh();\n          if (checkReTokenStatus) {\n            const response = await checkModelStatus(id);\n            if (response.status === 200) {\n              const responseData = await response.json();\n              const isTrained = responseData.is_trained;\n              const startTrain = responseData.start_train;\n              const startTime = responseData.model_start_time;\n              const finishTime = responseData.model_end_time;\n              setIsUploaded(true);\n              setIsTraining(startTrain);\n              setStartTime(startTime);\n              setFinishTime(finishTime);\n            } else if (response.status === 404) {\n              setIsUploaded(false);\n              setIsTraining(false);\n            }\n          } else {\n            // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\n            // alert(\"refresh Token過期，請重新登入!\");\n            localStorage.clear();\n            redirect(\"/login\");\n          }\n        }\n        // 發生其他問題\n        redirect(\"/login\");\n      } catch (error) {\n        console.error(\"Error durning get event: \", error);\n      }\n    }\n    fetchModelStatus();\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.outerContainer,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: nextImg,\n      alt: \"\\u4E0A\\u4E00\\u500B\",\n      className: classes.leftImg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.contentContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: avatar,\n        alt: \"\\u9810\\u8A2D\\u982D\\u50CF\",\n        className: classes.avatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.name,\n        children: [\"\\u59D3\\u540D : \", name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), !isUploaded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.startTime,\n        children: \"\\u958B\\u59CB\\u6642\\u9593 : \\u7121\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }, this), isUploaded && isTraining && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.startTime,\n        children: \"\\u958B\\u59CB\\u6642\\u9593 : 2024/11/17 15:04:20\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), isUploaded && !isTraining && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.startTime,\n        children: \"\\u5B8C\\u6210\\u6642\\u9593 : 2024/11/17 15:39:44\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this), !isUploaded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.notUpload,\n        children: \"\\u72C0\\u614B : \\u5C1A\\u672A\\u4E0A\\u50B3\\u8CC7\\u6599\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this), isUploaded && isTraining && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.training,\n        children: \"\\u72C0\\u614B : \\u8A13\\u7DF4\\u4E2D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }, this), isUploaded && !isTraining && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.finishTraining,\n        children: \"\\u72C0\\u614B : \\u8A13\\u7DF4\\u6210\\u529F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this), !isUploaded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.blank\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this), isUploaded && isTraining && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.blank\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }, this), isUploaded && !isTraining && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.finishHint,\n        children: \"\\u5DF2\\u81EA\\u52D5\\u65B0\\u589E\\u81F3\\u804A\\u5929\\u5C0D\\u8C61\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: nextImg,\n      alt: \"\\u4E0B\\u4E00\\u500B\",\n      className: classes.rightImg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n}\n_s(CheckStatusMainFrame, \"XOgrh7GJTGqz/62sC+VPBa83z28=\");\n_c = CheckStatusMainFrame;\nexport default CheckStatusMainFrame;\nvar _c;\n$RefreshReg$(_c, \"CheckStatusMainFrame\");","map":{"version":3,"names":["useState","useEffect","redirect","nextImg","default_avatar","checkModelStatus","refresh","classes","jsxDEV","_jsxDEV","CheckStatusMainFrame","name","avatar","id","_s","isUploaded","setIsUploaded","isTraining","setIsTraining","startTime","setStartTime","finishTime","setFinishTime","fetchModelStatus","response","accessToken","localStorage","getItem","status","responseData","json","isTrained","is_trained","startTrain","start_train","model_start_time","model_end_time","checkReTokenStatus","clear","error","console","className","outerContainer","children","src","alt","leftImg","fileName","_jsxFileName","lineNumber","columnNumber","contentContainer","notUpload","training","finishTraining","blank","finishHint","rightImg","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/gp-web-app/frontend/src/components/upload/CheckStatusMainFrame.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { redirect } from \"react-router-dom\";\r\nimport nextImg from \"../../images/goBack_white.png\";\r\nimport default_avatar from \"../../images/default_avatar.png\";\r\nimport { checkModelStatus } from \"../../utils/uploadUtils\";\r\nimport { refresh } from \"../../utils/tokenUtils\";\r\nimport classes from \"./CheckStatusMainFrame.module.css\";\r\n\r\nfunction CheckStatusMainFrame({ name, avatar, id }) {\r\n    const [isUploaded, setIsUploaded] = useState(false);\r\n    const [isTraining, setIsTraining] = useState(false);\r\n    const [startTime, setStartTime] = useState(\"\");\r\n    const [finishTime, setFinishTime] = useState(\"\");\r\n\r\n    if (avatar === \"\") {\r\n        avatar = default_avatar;\r\n    }\r\n\r\n    useEffect(() => {\r\n        async function fetchModelStatus() {\r\n            try {\r\n                const response = await checkModelStatus(id);\r\n                const accessToken = localStorage.getItem(\"accessToken\");\r\n    \r\n                if (response.status === 200) {\r\n                    const responseData = await response.json();\r\n                    const isTrained = responseData.is_trained;\r\n                    const startTrain = responseData.start_train;\r\n                    const startTime = responseData.model_start_time;\r\n                    const finishTime = responseData.model_end_time\r\n\r\n                    setIsUploaded(true);\r\n                    setIsTraining(startTrain);\r\n                    setStartTime(startTime);\r\n                    setFinishTime(finishTime);\r\n\r\n                } else if (response.status === 404) {\r\n                    setIsUploaded(false);\r\n                    setIsTraining(false);\r\n\r\n                } else if (response.status === 401 && accessToken) {\r\n                    // access Token過期，用refresh Token去拿新的access Token\r\n                    const checkReTokenStatus = await refresh();\r\n    \r\n                    if (checkReTokenStatus) {\r\n                        const response = await checkModelStatus(id);\r\n    \r\n                        if (response.status === 200) {\r\n                            const responseData = await response.json();\r\n                            const isTrained = responseData.is_trained;\r\n                            const startTrain = responseData.start_train;\r\n                            const startTime = responseData.model_start_time;\r\n                            const finishTime = responseData.model_end_time\r\n        \r\n                            setIsUploaded(true);\r\n                            setIsTraining(startTrain);\r\n                            setStartTime(startTime);\r\n                            setFinishTime(finishTime);\r\n\r\n                        } else if (response.status === 404) {\r\n                            setIsUploaded(false);\r\n                            setIsTraining(false);\r\n                        }\r\n                    } else {\r\n                        // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\r\n                        // alert(\"refresh Token過期，請重新登入!\");\r\n                        localStorage.clear();\r\n                        redirect(\"/login\");\r\n                    }\r\n                }\r\n                // 發生其他問題\r\n                redirect(\"/login\");\r\n            } catch (error) {\r\n                console.error(\"Error durning get event: \", error);\r\n            }\r\n        }\r\n\r\n        fetchModelStatus();\r\n    }, [id]);\r\n\r\n    return (\r\n        <div className={classes.outerContainer}>\r\n            <img src={nextImg} alt=\"上一個\" className={classes.leftImg} />\r\n            <div className={classes.contentContainer}>\r\n                <img src={avatar} alt=\"預設頭像\" className={classes.avatar} />\r\n                <div className={classes.name}>姓名 : {name}</div>\r\n\r\n                {!isUploaded && (\r\n                    <div className={classes.startTime}>開始時間 : 無</div>\r\n                )}\r\n                {isUploaded && isTraining && (\r\n                    <div className={classes.startTime}>開始時間 : 2024/11/17 15:04:20</div>\r\n                )}\r\n                {isUploaded && !isTraining && (\r\n                    <div className={classes.startTime}>完成時間 : 2024/11/17 15:39:44</div>\r\n                )}\r\n\r\n                {!isUploaded && (\r\n                    <div className={classes.notUpload}>狀態 : 尚未上傳資料</div>\r\n                )}\r\n                {isUploaded && isTraining && (\r\n                    <div className={classes.training}>狀態 : 訓練中</div>\r\n                )}\r\n                {isUploaded && !isTraining && (\r\n                    <div className={classes.finishTraining}>狀態 : 訓練成功</div>\r\n                )}\r\n                \r\n                {!isUploaded && (\r\n                    <div className={classes.blank}></div>\r\n                )}\r\n                {isUploaded && isTraining && (\r\n                    <div className={classes.blank}></div>\r\n                )}\r\n                {isUploaded && !isTraining && (\r\n                    <div className={classes.finishHint}>已自動新增至聊天對象</div>\r\n                )}\r\n            </div>\r\n            <img src={nextImg} alt=\"下一個\" className={classes.rightImg} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CheckStatusMainFrame;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}