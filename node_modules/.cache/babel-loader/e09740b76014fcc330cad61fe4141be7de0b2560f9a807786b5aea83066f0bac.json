{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\gp-web-app\\\\frontend\\\\src\\\\components\\\\chat\\\\EnterLink.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { redirect } from \"react-router-dom\";\nimport close_btn from \"../../images/close_button.png\";\nimport { createModelByLink } from \"../../utils/modelUtils\";\nimport { refresh } from \"../../utils/tokenUtils\";\nimport classes from \"./EnterLink.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EnterLink({\n  onClick,\n  onClickCloseBtn\n}) {\n  _s();\n  const [link, setLink] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  function linkChangeHandler(e) {\n    setLink(e.target.value);\n  }\n  async function createModelByLinkHandler() {\n    try {\n      const response = await createModelByLink(link);\n      const accessToken = localStorage.getItem(\"accessToken\");\n      if (response.status === 200) {\n        const responseData = await response.json();\n      } else if (response.status === 401 && accessToken) {\n        // access Token過期，用refresh Token去拿新的access Token\n        const checkReTokenStatus = await refresh();\n        if (checkReTokenStatus) {\n          const response = await createModelByLink(link);\n          if (response.status === 200) {\n            const responseData = await response.json();\n          }\n        } else {\n          // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\n          // alert(\"refresh Token過期，請重新登入!\");\n          localStorage.clear();\n          redirect(\"/login\");\n        }\n      } else {\n        const responseData = await response.json();\n        const error = responseData.message;\n        console.error(error);\n        alert(\"發生錯誤，請重新整理後再試一次\");\n      }\n    } catch (error) {\n      console.error(\"Error durning inference model: \", error);\n      redirect(\"/login\");\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.container,\n    onClick: onClick,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.header,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: close_btn,\n        alt: \"\\u95DC\\u9589\",\n        className: classes.closeImg,\n        onClick: onClickCloseBtn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.inputFrame,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputWrapper,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.inputContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.link,\n            children: \"\\u6A21\\u578B\\u9023\\u7D50\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: classes.starSign,\n            children: \"*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: classes.colon,\n            children: \":\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: classes.linkInput,\n            onChange: linkChangeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.error,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: classes.createBtn,\n        disabled: !link,\n        onClick: createModelByLinkHandler,\n        children: \"\\u5275\\u7ACB\\u804A\\u5929\\u5C0D\\u8C61\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n}\n_s(EnterLink, \"9VXkl3ha7DsWPEfuFp+MBLqDyy0=\");\n_c = EnterLink;\nexport default EnterLink;\nvar _c;\n$RefreshReg$(_c, \"EnterLink\");","map":{"version":3,"names":["useState","redirect","close_btn","createModelByLink","refresh","classes","jsxDEV","_jsxDEV","EnterLink","onClick","onClickCloseBtn","_s","link","setLink","error","setError","linkChangeHandler","e","target","value","createModelByLinkHandler","response","accessToken","localStorage","getItem","status","responseData","json","checkReTokenStatus","clear","message","console","alert","className","container","children","header","src","alt","closeImg","fileName","_jsxFileName","lineNumber","columnNumber","inputFrame","inputWrapper","inputContainer","starSign","colon","linkInput","onChange","createBtn","disabled","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/gp-web-app/frontend/src/components/chat/EnterLink.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { redirect } from \"react-router-dom\";\r\nimport close_btn from \"../../images/close_button.png\";\r\nimport { createModelByLink } from \"../../utils/modelUtils\";\r\nimport { refresh } from \"../../utils/tokenUtils\";\r\nimport classes from \"./EnterLink.module.css\";\r\n\r\nfunction EnterLink({ onClick, onClickCloseBtn }) {\r\n    const [link, setLink] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    \r\n    function linkChangeHandler(e) {\r\n        setLink(e.target.value);\r\n    }\r\n\r\n    async function createModelByLinkHandler() {\r\n\r\n        try {\r\n            const response = await createModelByLink(link);\r\n            const accessToken = localStorage.getItem(\"accessToken\");\r\n\r\n            if (response.status === 200) {\r\n                const responseData = await response.json();\r\n\r\n\r\n            } else if (response.status === 401 && accessToken) {\r\n                // access Token過期，用refresh Token去拿新的access Token\r\n                const checkReTokenStatus = await refresh();\r\n                if (checkReTokenStatus) {\r\n                    const response = await createModelByLink(link);\r\n                    if (response.status === 200) {\r\n                        const responseData = await response.json();\r\n                        \r\n                        }\r\n                    \r\n                } else {\r\n                    // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\r\n                    // alert(\"refresh Token過期，請重新登入!\");\r\n                    localStorage.clear();\r\n                    redirect(\"/login\");\r\n                }\r\n            } else {\r\n                const responseData = await response.json();\r\n                const error = responseData.message;\r\n                console.error(error);\r\n                alert(\"發生錯誤，請重新整理後再試一次\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error durning inference model: \", error);\r\n            redirect(\"/login\");\r\n        }\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className={classes.container} onClick={onClick}>\r\n            <div className={classes.header}>\r\n                <img\r\n                    src={close_btn}\r\n                    alt=\"關閉\"\r\n                    className={classes.closeImg}\r\n                    onClick={onClickCloseBtn}\r\n                />\r\n            </div>\r\n            <div className={classes.inputFrame}>\r\n                <div className={classes.inputWrapper}>\r\n                    <div className={classes.inputContainer}>\r\n                        <div className={classes.link}>模型連結</div>\r\n                        <span className={classes.starSign}>*</span>\r\n                        <span className={classes.colon}>:</span>\r\n                        <input className={classes.linkInput} onChange={linkChangeHandler} />\r\n                    </div>\r\n                </div>\r\n                <div className={classes.error}>{error}</div>\r\n                <button className={classes.createBtn} disabled={!link} onClick={createModelByLinkHandler} >創立聊天對象</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EnterLink;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}