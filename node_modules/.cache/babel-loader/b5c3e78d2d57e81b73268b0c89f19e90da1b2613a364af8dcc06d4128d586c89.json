{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\gp-web-app\\\\frontend\\\\src\\\\components\\\\chat\\\\ContactPerson.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport def_avatar from \"../../images/default_avatar.png\";\nimport classes from \"./ContactPerson.module.css\";\nimport { deleteModel } from \"../../utils/modelUtils\";\nimport { refresh } from \"../../utils/tokenUtils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ContactPerson({\n  name,\n  modelId,\n  personality,\n  photo,\n  isSelected,\n  onClick\n}) {\n  _s();\n  const [showModal, setShowModal] = useState(false);\n  const handleRightClick = event => {\n    event.preventDefault(); // 阻止預設右鍵選單\n    setShowModal(true);\n  };\n  const handleCloseModal = () => {\n    setShowModal(false);\n  };\n  async function handleConfirmDelete() {\n    console.log(modelId);\n    try {\n      const access_token = localStorage.getItem(\"accessToken\");\n      const response = await fetch(`https://nccu-group-8.work/userinfo/user/delete_model/${modelId}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": \"Bearer \" + access_token\n        }\n      });\n      if (response.status === 200) {\n        setShowModal(false);\n        console.log(\"刪除模型成功\");\n        window.location.reload();\n      } else if (response.status === 400) {\n        const responseData = await response.json();\n        const error = responseData.error;\n        console.log(\"錯誤訊息: \" + error);\n      } else {\n        const responseData = await response.json();\n        const error = responseData.message;\n        console.error(error);\n        alert(\"發生錯誤，請重新整理後再試一次\");\n      }\n    } catch (error) {\n      console.error(\"Error durning delete model: \", error);\n    }\n  }\n  ;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${classes.container} ${isSelected ? classes.isSelected : \"\"} ${!showModal ? classes.disableInteraction : \"\"}`,\n    onClick: onClick,\n    onContextMenu: handleRightClick,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: photo,\n      alt: \"\\u6A21\\u578B\\u982D\\u50CF\",\n      className: classes.avatar\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.content,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.name,\n        children: [\"\\u59D3\\u540D\\uFF1A \", name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.personality,\n        children: [\"\\u500B\\u6027\\u7559\\u8A00\\uFF1A \", personality]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.modalBackdrop,\n      onClick: handleCloseModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.modal,\n        onClick: event => event.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u662F\\u5426\\u8981\\u522A\\u9664\\u6B64\\u6A21\\u578B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.modalButtons,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: classes.cancelButton,\n            onClick: handleCloseModal,\n            children: \"\\u5426\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: classes.confirmButton,\n            onClick: handleConfirmDelete,\n            children: \"\\u662F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(ContactPerson, \"uVlnG5KLfXemZk5i5Fl+Cg356FU=\");\n_c = ContactPerson;\nexport default ContactPerson;\nvar _c;\n$RefreshReg$(_c, \"ContactPerson\");","map":{"version":3,"names":["useState","def_avatar","classes","deleteModel","refresh","jsxDEV","_jsxDEV","ContactPerson","name","modelId","personality","photo","isSelected","onClick","_s","showModal","setShowModal","handleRightClick","event","preventDefault","handleCloseModal","handleConfirmDelete","console","log","access_token","localStorage","getItem","response","fetch","method","headers","status","window","location","reload","responseData","json","error","message","alert","className","container","disableInteraction","onContextMenu","children","src","alt","avatar","fileName","_jsxFileName","lineNumber","columnNumber","content","modalBackdrop","modal","stopPropagation","modalButtons","cancelButton","confirmButton","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/gp-web-app/frontend/src/components/chat/ContactPerson.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport def_avatar from \"../../images/default_avatar.png\";\r\nimport classes from \"./ContactPerson.module.css\";\r\nimport { deleteModel } from \"../../utils/modelUtils\";\r\nimport { refresh } from \"../../utils/tokenUtils\";\r\n\r\nfunction ContactPerson({ name, modelId, personality, photo, isSelected, onClick }) {\r\n    const [showModal, setShowModal] = useState(false);\r\n\r\n    const handleRightClick = (event) => {\r\n        event.preventDefault(); // 阻止預設右鍵選單\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        setShowModal(false);\r\n    };\r\n\r\n    async function handleConfirmDelete() {\r\n        console.log(modelId);\r\n        try {\r\n            const access_token = localStorage.getItem(\"accessToken\");\r\n            const response = await fetch(\r\n                `https://nccu-group-8.work/userinfo/user/delete_model/${modelId}`,\r\n                {\r\n                    method: \"DELETE\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        \"Authorization\": \"Bearer \" + access_token,\r\n                    },\r\n                }\r\n            );\r\n\r\n            if (response.status === 200) {\r\n                setShowModal(false);\r\n                console.log(\"刪除模型成功\");\r\n                window.location.reload();\r\n            } else if (response.status === 400) {\r\n                const responseData = await response.json();\r\n                const error = responseData.error;\r\n                console.log(\"錯誤訊息: \" + error);\r\n            } else {\r\n                const responseData = await response.json();\r\n                const error = responseData.message;\r\n                console.error(error);\r\n                alert(\"發生錯誤，請重新整理後再試一次\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error durning delete model: \", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className={`${classes.container} ${\r\n                isSelected ? classes.isSelected : \"\"\r\n            } ${!showModal ? classes.disableInteraction : \"\"}`}\r\n            onClick={onClick}\r\n            onContextMenu={handleRightClick}\r\n        >\r\n            <img src={photo} alt=\"模型頭像\" className={classes.avatar} />\r\n            <div className={classes.content}>\r\n                <div className={classes.name}>姓名： {name}</div>\r\n                <div className={classes.personality}>\r\n                    個性留言： {personality}\r\n                </div>\r\n            </div>\r\n            {showModal && (\r\n                <div className={classes.modalBackdrop} onClick={handleCloseModal}>\r\n                    <div className={classes.modal} onClick={(event) => event.stopPropagation()}>\r\n                        <p>是否要刪除此模型</p>\r\n                        <div className={classes.modalButtons}>\r\n                            <button\r\n                                className={classes.cancelButton}\r\n                                onClick={handleCloseModal}\r\n                            >\r\n                                否\r\n                            </button>\r\n                            <button\r\n                                className={classes.confirmButton}\r\n                                onClick={handleConfirmDelete}\r\n                            >\r\n                                是\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ContactPerson;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}