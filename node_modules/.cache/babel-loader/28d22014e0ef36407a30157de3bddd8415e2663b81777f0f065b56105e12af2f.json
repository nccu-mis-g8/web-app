{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\gp-web-app\\\\frontend\\\\src\\\\components\\\\chat\\\\EnterLink.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { redirect } from \"react-router-dom\";\nimport close_btn from \"../../images/close_button.png\";\nimport { createModelByLink } from \"../../utils/modelUtils\";\nimport { refresh } from \"../../utils/tokenUtils\";\nimport classes from \"./EnterLink.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EnterLink({\n  onClick,\n  onClickCloseBtn\n}) {\n  _s();\n  const [link, setLink] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  function linkChangeHandler(e) {\n    setLink(e.target.value);\n  }\n  async function createModelByLinkHandler() {\n    try {\n      const response = await createModelByLink(link);\n      const accessToken = localStorage.getItem(\"accessToken\");\n      if (response.status === 200) {\n        onClickCloseBtn();\n        window.location.reload();\n      } else if (response.status === 401 && accessToken) {\n        // access Token過期，用refresh Token去拿新的access Token\n        const checkReTokenStatus = await refresh();\n        if (checkReTokenStatus) {\n          const response = await createModelByLink(link);\n          if (response.status === 200) {\n            onClickCloseBtn();\n            window.location.reload();\n          }\n        } else {\n          // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\n          // alert(\"refresh Token過期，請重新登入!\");\n          localStorage.clear();\n          redirect(\"/login\");\n        }\n      } else {\n        const responseData = await response.json();\n        const error = responseData.message;\n        console.error(error);\n        setError(error);\n      }\n    } catch (error) {\n      console.error(\"Error durning create model by link: \", error);\n      redirect(\"/login\");\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.container,\n    onClick: onClick,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.header,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: close_btn,\n        alt: \"\\u95DC\\u9589\",\n        className: classes.closeImg,\n        onClick: onClickCloseBtn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.inputFrame,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputWrapper,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.inputContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.link,\n            children: \"\\u6A21\\u578B\\u9023\\u7D50\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: classes.starSign,\n            children: \"*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: classes.colon,\n            children: \":\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: classes.linkInput,\n            onChange: linkChangeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.error,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: classes.createBtn,\n        disabled: !link,\n        onClick: createModelByLinkHandler,\n        children: \"\\u5275\\u7ACB\\u804A\\u5929\\u5C0D\\u8C61\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(EnterLink, \"9VXkl3ha7DsWPEfuFp+MBLqDyy0=\");\n_c = EnterLink;\nexport default EnterLink;\nvar _c;\n$RefreshReg$(_c, \"EnterLink\");","map":{"version":3,"names":["useState","redirect","close_btn","createModelByLink","refresh","classes","jsxDEV","_jsxDEV","EnterLink","onClick","onClickCloseBtn","_s","link","setLink","error","setError","linkChangeHandler","e","target","value","createModelByLinkHandler","response","accessToken","localStorage","getItem","status","window","location","reload","checkReTokenStatus","clear","responseData","json","message","console","className","container","children","header","src","alt","closeImg","fileName","_jsxFileName","lineNumber","columnNumber","inputFrame","inputWrapper","inputContainer","starSign","colon","linkInput","onChange","createBtn","disabled","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/gp-web-app/frontend/src/components/chat/EnterLink.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { redirect } from \"react-router-dom\";\r\nimport close_btn from \"../../images/close_button.png\";\r\nimport { createModelByLink } from \"../../utils/modelUtils\";\r\nimport { refresh } from \"../../utils/tokenUtils\";\r\nimport classes from \"./EnterLink.module.css\";\r\n\r\nfunction EnterLink({ onClick, onClickCloseBtn }) {\r\n    const [link, setLink] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n\r\n    function linkChangeHandler(e) {\r\n        setLink(e.target.value);\r\n    }\r\n\r\n    async function createModelByLinkHandler() {\r\n        try {\r\n            const response = await createModelByLink(link);\r\n            const accessToken = localStorage.getItem(\"accessToken\");\r\n\r\n            if (response.status === 200) {\r\n                onClickCloseBtn();\r\n                window.location.reload();\r\n\r\n            } else if (response.status === 401 && accessToken) {\r\n                // access Token過期，用refresh Token去拿新的access Token\r\n                const checkReTokenStatus = await refresh();\r\n                if (checkReTokenStatus) {\r\n                    const response = await createModelByLink(link);\r\n                    if (response.status === 200) {\r\n                        onClickCloseBtn();\r\n                        window.location.reload();\r\n\r\n                    }\r\n                } else {\r\n                    // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\r\n                    // alert(\"refresh Token過期，請重新登入!\");\r\n                    localStorage.clear();\r\n                    redirect(\"/login\");\r\n                }\r\n            } else {\r\n                const responseData = await response.json();\r\n                const error = responseData.message;\r\n                console.error(error);\r\n                setError(error);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error durning create model by link: \", error);\r\n            redirect(\"/login\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.container} onClick={onClick}>\r\n            <div className={classes.header}>\r\n                <img\r\n                    src={close_btn}\r\n                    alt=\"關閉\"\r\n                    className={classes.closeImg}\r\n                    onClick={onClickCloseBtn}\r\n                />\r\n            </div>\r\n            <div className={classes.inputFrame}>\r\n                <div className={classes.inputWrapper}>\r\n                    <div className={classes.inputContainer}>\r\n                        <div className={classes.link}>模型連結</div>\r\n                        <span className={classes.starSign}>*</span>\r\n                        <span className={classes.colon}>:</span>\r\n                        <input\r\n                            className={classes.linkInput}\r\n                            onChange={linkChangeHandler}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className={classes.error}>{error}</div>\r\n                <button\r\n                    className={classes.createBtn}\r\n                    disabled={!link}\r\n                    onClick={createModelByLinkHandler}\r\n                >\r\n                    創立聊天對象\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EnterLink;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}