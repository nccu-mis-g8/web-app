{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\gp-web-app\\\\frontend\\\\src\\\\routes\\\\SelectUpload.js\";\nimport { redirect, useLoaderData } from \"react-router-dom\";\nimport NavigationBar from \"../components/NavigationBar\";\nimport SelectUploadMainFrame from \"../components/upload/SelectUploadMainFrame\";\nimport { refresh } from \"../utils/tokenUtils\";\nimport { getAllModel } from \"../utils/modelUtils\";\nimport classes from \"./SelectUpload.module.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Upload() {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.barContainer,\n        children: /*#__PURE__*/_jsxDEV(NavigationBar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 13,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SelectUploadMainFrame, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_c = Upload;\nexport async function loader() {\n  const response = await getAllModel();\n  const accessToken = localStorage.getItem(\"accessToken\");\n  if (response.status === 200) {\n    const responseData = await response.json();\n    return responseData;\n  } else if (response.status === 401 && accessToken) {\n    // access Token過期，用refresh Token去拿新的access Token\n    const checkReTokenStatus = await refresh();\n    if (checkReTokenStatus) {\n      const response = await getAllModel();\n      if (response.status === 200) {\n        const responseData = await response.json();\n        return responseData;\n      }\n    } else {\n      // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\n      // alert(\"refresh Token過期，請重新登入!\");\n      localStorage.clear();\n      return redirect(\"/login\");\n    }\n  }\n  // 發生其他問題\n  return redirect(\"/login\");\n}\nexport default Upload;\nvar _c;\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"names":["redirect","useLoaderData","NavigationBar","SelectUploadMainFrame","refresh","getAllModel","classes","jsxDEV","_jsxDEV","Fragment","_Fragment","Upload","children","className","container","barContainer","fileName","_jsxFileName","lineNumber","columnNumber","_c","loader","response","accessToken","localStorage","getItem","status","responseData","json","checkReTokenStatus","clear","$RefreshReg$"],"sources":["C:/Users/user/Desktop/gp-web-app/frontend/src/routes/SelectUpload.js"],"sourcesContent":["import { redirect, useLoaderData } from \"react-router-dom\";\r\nimport NavigationBar from \"../components/NavigationBar\";\r\nimport SelectUploadMainFrame from \"../components/upload/SelectUploadMainFrame\";\r\nimport { refresh } from \"../utils/tokenUtils\";\r\nimport { getAllModel } from \"../utils/modelUtils\";\r\nimport classes from \"./SelectUpload.module.css\";\r\n\r\nfunction Upload() {\r\n    return (\r\n        <>\r\n            <div className={classes.container}>\r\n                <div className={classes.barContainer}>\r\n                    <NavigationBar />\r\n                </div>\r\n                <SelectUploadMainFrame />\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport async function loader() {\r\n    const response = await getAllModel();\r\n    const accessToken = localStorage.getItem(\"accessToken\");\r\n\r\n    if (response.status === 200) {\r\n        const responseData = await response.json();\r\n        return responseData;\r\n    } else if (response.status === 401 && accessToken) {\r\n        // access Token過期，用refresh Token去拿新的access Token\r\n        const checkReTokenStatus = await refresh();\r\n\r\n        if (checkReTokenStatus) {\r\n            const response = await getAllModel();\r\n\r\n            if (response.status === 200) {\r\n                const responseData = await response.json();\r\n                return responseData;\r\n            }\r\n        } else {\r\n            // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\r\n            // alert(\"refresh Token過期，請重新登入!\");\r\n            localStorage.clear();\r\n            return redirect(\"/login\");\r\n        }\r\n    }\r\n    // 發生其他問題\r\n    return redirect(\"/login\");\r\n}\r\n\r\nexport default Upload;\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,aAAa,QAAQ,kBAAkB;AAC1D,OAAOC,aAAa,MAAM,6BAA6B;AACvD,OAAOC,qBAAqB,MAAM,4CAA4C;AAC9E,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,SAASC,WAAW,QAAQ,qBAAqB;AACjD,OAAOC,OAAO,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEhD,SAASC,MAAMA,CAAA,EAAG;EACd,oBACIH,OAAA,CAAAE,SAAA;IAAAE,QAAA,eACIJ,OAAA;MAAKK,SAAS,EAAEP,OAAO,CAACQ,SAAU;MAAAF,QAAA,gBAC9BJ,OAAA;QAAKK,SAAS,EAAEP,OAAO,CAACS,YAAa;QAAAH,QAAA,eACjCJ,OAAA,CAACN,aAAa;UAAAc,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChB,CAAC,eACNX,OAAA,CAACL,qBAAqB;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxB;EAAC,gBACR,CAAC;AAEX;AAACC,EAAA,GAXQT,MAAM;AAaf,OAAO,eAAeU,MAAMA,CAAA,EAAG;EAC3B,MAAMC,QAAQ,GAAG,MAAMjB,WAAW,CAAC,CAAC;EACpC,MAAMkB,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;EAEvD,IAAIH,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;IACzB,MAAMC,YAAY,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;IAC1C,OAAOD,YAAY;EACvB,CAAC,MAAM,IAAIL,QAAQ,CAACI,MAAM,KAAK,GAAG,IAAIH,WAAW,EAAE;IAC/C;IACA,MAAMM,kBAAkB,GAAG,MAAMzB,OAAO,CAAC,CAAC;IAE1C,IAAIyB,kBAAkB,EAAE;MACpB,MAAMP,QAAQ,GAAG,MAAMjB,WAAW,CAAC,CAAC;MAEpC,IAAIiB,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;QACzB,MAAMC,YAAY,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;QAC1C,OAAOD,YAAY;MACvB;IACJ,CAAC,MAAM;MACH;MACA;MACAH,YAAY,CAACM,KAAK,CAAC,CAAC;MACpB,OAAO9B,QAAQ,CAAC,QAAQ,CAAC;IAC7B;EACJ;EACA;EACA,OAAOA,QAAQ,CAAC,QAAQ,CAAC;AAC7B;AAEA,eAAeW,MAAM;AAAC,IAAAS,EAAA;AAAAW,YAAA,CAAAX,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}