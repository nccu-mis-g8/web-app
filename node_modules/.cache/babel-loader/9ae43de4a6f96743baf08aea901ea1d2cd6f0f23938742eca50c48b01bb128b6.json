{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\gp-web-app\\\\frontend\\\\src\\\\components\\\\chat\\\\ChatRoomHeader.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useNavigate, redirect } from \"react-router-dom\";\nimport classes from \"./ChatRoomHeader.module.css\";\nimport goBack from \"../../images/goBack.png\";\nimport share from \"../../images/share.png\";\nimport question from \"../../images/question.png\";\nimport { getShareLink } from \"../../utils/modelUtils\";\nimport { refresh } from \"../../utils/tokenUtils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatRightHeader({\n  name,\n  modelName,\n  viewInfoModal\n}) {\n  _s();\n  const [showTooltip, setShowTooltip] = useState(false);\n  const navigate = useNavigate();\n  function goBackHandler() {\n    navigate(\"/\");\n  }\n  async function shareHandler() {\n    const formData = new FormData();\n    formData.append(\"modelname\", modelName);\n    try {\n      const response = await getShareLink(formData);\n      const accessToken = localStorage.getItem(\"accessToken\");\n      if (response.status === 200) {\n        const responseData = await response.json();\n        await navigator.clipboard.writeText(responseData.link);\n        setShowTooltip(true);\n        setTimeout(() => {\n          setShowTooltip(false); // 1.5 秒後隱藏提示\n        }, 1500);\n      } else if (response.status === 401 && accessToken) {\n        // access Token過期，用refresh Token去拿新的access Token\n        const checkReTokenStatus = await refresh();\n        if (checkReTokenStatus) {\n          const response = await getShareLink(formData);\n          if (response.status === 200) {\n            const responseData = await response.json();\n            await navigator.clipboard.writeText(responseData.link);\n            setShowTooltip(true);\n            setTimeout(() => {\n              setShowTooltip(false); // 1.5 秒後隱藏提示\n            }, 1500);\n          }\n        } else {\n          // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\n          // alert(\"refresh Token過期，請重新登入!\");\n          localStorage.clear();\n          redirect(\"/login\");\n        }\n      } else {\n        const responseData = await response.json();\n        const error = responseData.message;\n        console.error(error);\n        alert(\"發生錯誤，請重新整理後再試一次\");\n      }\n    } catch (error) {\n      console.error(\"Error durning get share link: \", error);\n      redirect(\"/login\");\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.header,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.left,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: goBack,\n          className: classes.goBack,\n          alt: \"\\u8FD4\\u56DE\",\n          onClick: goBackHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: classes.name,\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.right,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: share,\n          alt: \"\\u5206\\u4EAB\",\n          className: classes.share,\n          onClick: shareHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: question,\n          alt: \"\\u66F4\\u591A\\u8CC7\\u8A0A\",\n          className: classes.question,\n          onClick: viewInfoModal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), showTooltip && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.tooltip,\n      children: \"\\u5DF2\\u8907\\u88FD\\u5206\\u4EAB\\u9023\\u7D50\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}\n_s(ChatRightHeader, \"xeV9yDgw3jv3ZbKV+PQAfUaAWFI=\", false, function () {\n  return [useNavigate];\n});\n_c = ChatRightHeader;\nexport default ChatRightHeader;\nvar _c;\n$RefreshReg$(_c, \"ChatRightHeader\");","map":{"version":3,"names":["useState","useNavigate","redirect","classes","goBack","share","question","getShareLink","refresh","jsxDEV","_jsxDEV","ChatRightHeader","name","modelName","viewInfoModal","_s","showTooltip","setShowTooltip","navigate","goBackHandler","shareHandler","formData","FormData","append","response","accessToken","localStorage","getItem","status","responseData","json","navigator","clipboard","writeText","link","setTimeout","checkReTokenStatus","clear","error","message","console","alert","className","header","children","container","left","src","alt","onClick","fileName","_jsxFileName","lineNumber","columnNumber","right","tooltip","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/gp-web-app/frontend/src/components/chat/ChatRoomHeader.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useNavigate, redirect } from \"react-router-dom\";\r\nimport classes from \"./ChatRoomHeader.module.css\";\r\nimport goBack from \"../../images/goBack.png\";\r\nimport share from \"../../images/share.png\";\r\nimport question from \"../../images/question.png\";\r\nimport { getShareLink } from \"../../utils/modelUtils\";\r\nimport { refresh } from \"../../utils/tokenUtils\";\r\n\r\nfunction ChatRightHeader({name, modelName, viewInfoModal}) {\r\n    const [showTooltip, setShowTooltip] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    function goBackHandler() {\r\n        navigate(\"/\");\r\n    }\r\n\r\n    async function shareHandler() {\r\n        const formData = new FormData();\r\n        formData.append(\"modelname\", modelName);\r\n\r\n        try {\r\n            const response = await getShareLink(formData);\r\n            const accessToken = localStorage.getItem(\"accessToken\");\r\n\r\n            if (response.status === 200) {\r\n                const responseData = await response.json();\r\n                await navigator.clipboard.writeText(responseData.link);\r\n                setShowTooltip(true);\r\n                setTimeout(() => {\r\n                    setShowTooltip(false); // 1.5 秒後隱藏提示\r\n                }, 1500);\r\n\r\n            } else if (response.status === 401 && accessToken) {\r\n                // access Token過期，用refresh Token去拿新的access Token\r\n                const checkReTokenStatus = await refresh();\r\n                if (checkReTokenStatus) {\r\n                    const response = await getShareLink(formData);\r\n                    if (response.status === 200) {\r\n                        const responseData = await response.json();\r\n                        await navigator.clipboard.writeText(responseData.link);\r\n                        setShowTooltip(true);\r\n                        setTimeout(() => {\r\n                            setShowTooltip(false); // 1.5 秒後隱藏提示\r\n                        }, 1500);\r\n                    }\r\n                } else {\r\n                    // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\r\n                    // alert(\"refresh Token過期，請重新登入!\");\r\n                    localStorage.clear();\r\n                    redirect(\"/login\");\r\n                }\r\n            } else {\r\n                const responseData = await response.json();\r\n                const error = responseData.message;\r\n                console.error(error);\r\n                alert(\"發生錯誤，請重新整理後再試一次\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error durning get share link: \", error);\r\n            redirect(\"/login\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.header}>\r\n            <div className={classes.container}>\r\n                <div className={classes.left}>\r\n                    <img src={goBack} className={classes.goBack} alt=\"返回\" onClick={goBackHandler} />\r\n                    <span className={classes.name}>{name}</span>\r\n                </div>\r\n                <div className={classes.right}>\r\n                    <img src={share} alt=\"分享\" className={classes.share} onClick={shareHandler} />\r\n                    <img src={question} alt=\"更多資訊\" className={classes.question} onClick={viewInfoModal} />\r\n                </div>\r\n            </div>\r\n            {showTooltip && (\r\n                <div className={classes.tooltip}>已複製分享連結</div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ChatRightHeader;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}