{"ast":null,"code":"import{useState,useRef,useEffect}from\"react\";import classes from\"./MessageInput.module.css\";import sendButton from\"../../images/sendButton.png\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function MessageInput(_ref){let{onSendMessage}=_ref;const[text,setText]=useState(\"\");const textareaRef=useRef(null);const containerRef=useRef(null);function textChangeHandler(e){setText(e.target.value);}function keyDownHandler(e){if(e.key===\"Enter\"&&!e.shiftKey){e.preventDefault();// 阻止默認行為 (也就是不要在textarea創建新行)\nsendMessageHandler();}}function sendMessageHandler(){if(text.trim()){//檢查是否不只空白字符\nonSendMessage(text);setText(\"\");}}useEffect(()=>{const textarea=textareaRef.current;const container=containerRef.current;// 自適應高度\ntextarea.style.height=\"auto\";textarea.style.height=`${textarea.scrollHeight}px`;// 當達到設定高度時，變成滾動，停止增加高度\nif(textarea.scrollHeight>140){textarea.style.height=\"140px\";textarea.style.overflowY=\"scroll\";}else{textarea.style.overflowY=\"hidden\";}// 根據內容調整容器高度\ncontainer.style.width=\"auto\";},[text]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:classes.outerContainer,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.messageInputWrapper,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.textareaContainer,ref:containerRef,children:/*#__PURE__*/_jsx(\"textarea\",{className:classes.customTextarea,placeholder:\"\\u767C\\u9001\\u8A0A\\u606F\",value:text,ref:textareaRef,rows:\"1\",onChange:textChangeHandler,onKeyDown:keyDownHandler})}),/*#__PURE__*/_jsx(\"button\",{className:classes.sendButton,onClick:sendMessageHandler,children:/*#__PURE__*/_jsx(\"img\",{src:sendButton,alt:\"\\u9001\\u51FA\",width:\"35px\",height:\"35px\"})})]})})});}export default MessageInput;","map":{"version":3,"names":["useState","useRef","useEffect","classes","sendButton","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MessageInput","_ref","onSendMessage","text","setText","textareaRef","containerRef","textChangeHandler","e","target","value","keyDownHandler","key","shiftKey","preventDefault","sendMessageHandler","trim","textarea","current","container","style","height","scrollHeight","overflowY","width","children","className","outerContainer","messageInputWrapper","textareaContainer","ref","customTextarea","placeholder","rows","onChange","onKeyDown","onClick","src","alt"],"sources":["C:/Users/user/Desktop/gp-web-app/frontend/src/components/chat/MessageInput.js"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\";\r\nimport classes from \"./MessageInput.module.css\";\r\nimport sendButton from \"../../images/sendButton.png\";\r\n\r\nfunction MessageInput({ onSendMessage }) {\r\n    const [text, setText] = useState(\"\");\r\n\r\n    const textareaRef = useRef(null);\r\n    const containerRef = useRef(null);\r\n\r\n    function textChangeHandler(e) {\r\n        setText(e.target.value);\r\n    }\r\n\r\n    function keyDownHandler(e) {\r\n        if (e.key === \"Enter\" && !e.shiftKey) {\r\n            e.preventDefault(); // 阻止默認行為 (也就是不要在textarea創建新行)\r\n            sendMessageHandler();\r\n        }\r\n    }\r\n\r\n    function sendMessageHandler() {\r\n        if (text.trim()) {\r\n            //檢查是否不只空白字符\r\n            onSendMessage(text);\r\n            setText(\"\");\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const textarea = textareaRef.current;\r\n        const container = containerRef.current;\r\n\r\n        // 自適應高度\r\n        textarea.style.height = \"auto\";\r\n        textarea.style.height = `${textarea.scrollHeight}px`;\r\n\r\n        // 當達到設定高度時，變成滾動，停止增加高度\r\n        if (textarea.scrollHeight > 140) {\r\n            textarea.style.height = \"140px\";\r\n            textarea.style.overflowY = \"scroll\";\r\n        } else {\r\n            textarea.style.overflowY = \"hidden\";\r\n        }\r\n\r\n        // 根據內容調整容器高度\r\n        container.style.width = \"auto\";\r\n    }, [text]);\r\n\r\n    return (\r\n        <>\r\n            <div className={classes.outerContainer}>\r\n                <div className={classes.messageInputWrapper}>\r\n                    <div\r\n                        className={classes.textareaContainer}\r\n                        ref={containerRef}\r\n                    >\r\n                        <textarea\r\n                            className={classes.customTextarea}\r\n                            placeholder=\"發送訊息\"\r\n                            value={text}\r\n                            ref={textareaRef}\r\n                            rows=\"1\"\r\n                            onChange={textChangeHandler}\r\n                            onKeyDown={keyDownHandler}\r\n                        />\r\n                    </div>\r\n                    <button\r\n                        className={classes.sendButton}\r\n                        onClick={sendMessageHandler}\r\n                    >\r\n                        <img\r\n                            src={sendButton}\r\n                            alt=\"送出\"\r\n                            width=\"35px\"\r\n                            height=\"35px\"\r\n                        />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default MessageInput;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}