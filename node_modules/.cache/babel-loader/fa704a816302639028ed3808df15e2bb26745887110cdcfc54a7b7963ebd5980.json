{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\gp-web-app\\\\frontend\\\\src\\\\routes\\\\SelectChat.js\",\n  _s = $RefreshSig$();\nimport { redirect, useLoaderData } from \"react-router-dom\";\nimport NavigationBar from \"../components/NavigationBar\";\nimport SelectChatMainFrame from \"../components/chat/SelectChatMainFrame\";\nimport { refresh } from \"../utils/tokenUtils\";\nimport { getAllModel } from \"../utils/modelUtils\";\nimport classes from \"./SelectChat.module.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction SelectChat() {\n  _s();\n  const modelInfo = useLoaderData();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.barContainer,\n        children: /*#__PURE__*/_jsxDEV(NavigationBar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SelectChatMainFrame, {\n        modelInfo: modelInfo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(SelectChat, \"9avoJ66xKI/J1zUatcLaKQvASto=\", false, function () {\n  return [useLoaderData];\n});\n_c = SelectChat;\nexport async function loader() {\n  const accessToken = localStorage.getItem(\"accessToken\");\n  if (!accessToken) {\n    return redirect(\"/login\");\n  }\n  const response = await getAllModel();\n  if (response.status === 200) {\n    const responseData = await response.json();\n    return responseData;\n  } else if (response.status === 401 && accessToken) {\n    // access Token過期，用refresh Token去拿新的access Token\n    const checkReTokenStatus = await refresh();\n    if (checkReTokenStatus) {\n      const response = await getAllModel();\n      if (response.status === 200) {\n        const responseData = await response.json();\n        return responseData;\n      }\n    } else {\n      // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\n      // alert(\"refresh Token過期，請重新登入!\");\n      localStorage.clear();\n      return redirect(\"/login\");\n    }\n  }\n  // 發生其他問題\n  return redirect(\"/login\");\n}\nexport default SelectChat;\nvar _c;\n$RefreshReg$(_c, \"SelectChat\");","map":{"version":3,"names":["redirect","useLoaderData","NavigationBar","SelectChatMainFrame","refresh","getAllModel","classes","jsxDEV","_jsxDEV","Fragment","_Fragment","SelectChat","_s","modelInfo","children","className","container","barContainer","fileName","_jsxFileName","lineNumber","columnNumber","_c","loader","accessToken","localStorage","getItem","response","status","responseData","json","checkReTokenStatus","clear","$RefreshReg$"],"sources":["C:/Users/user/Desktop/gp-web-app/frontend/src/routes/SelectChat.js"],"sourcesContent":["import { redirect, useLoaderData } from \"react-router-dom\";\r\nimport NavigationBar from \"../components/NavigationBar\";\r\nimport SelectChatMainFrame from \"../components/chat/SelectChatMainFrame\";\r\nimport { refresh } from \"../utils/tokenUtils\";\r\nimport { getAllModel } from \"../utils/modelUtils\";\r\nimport classes from \"./SelectChat.module.css\";\r\n\r\nfunction SelectChat() {\r\n\r\n    const modelInfo = useLoaderData();\r\n\r\n    return (\r\n        <>\r\n            <div className={classes.container}>\r\n                <div className={classes.barContainer}>\r\n                    <NavigationBar />\r\n                </div>\r\n                <SelectChatMainFrame modelInfo={modelInfo} />\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport async function loader() {\r\n\r\n    const accessToken = localStorage.getItem(\"accessToken\");\r\n    if (!accessToken) {\r\n        return redirect(\"/login\");\r\n    }\r\n\r\n    const response = await getAllModel();\r\n\r\n    if (response.status === 200) {\r\n        const responseData = await response.json();\r\n        return responseData;\r\n    } else if (response.status === 401 && accessToken) {\r\n        // access Token過期，用refresh Token去拿新的access Token\r\n        const checkReTokenStatus = await refresh();\r\n\r\n        if (checkReTokenStatus) {\r\n            const response = await getAllModel();\r\n\r\n            if (response.status === 200) {\r\n                const responseData = await response.json();\r\n                return responseData;\r\n            }\r\n        } else {\r\n            // refresh Token過期，重新登入並刪掉 localStorage 裡的東西\r\n            // alert(\"refresh Token過期，請重新登入!\");\r\n            localStorage.clear();\r\n            return redirect(\"/login\");\r\n        }\r\n    }\r\n    // 發生其他問題\r\n    return redirect(\"/login\");\r\n}\r\n\r\nexport default SelectChat;\r\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,aAAa,QAAQ,kBAAkB;AAC1D,OAAOC,aAAa,MAAM,6BAA6B;AACvD,OAAOC,mBAAmB,MAAM,wCAAwC;AACxE,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,SAASC,WAAW,QAAQ,qBAAqB;AACjD,OAAOC,OAAO,MAAM,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE9C,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EAElB,MAAMC,SAAS,GAAGZ,aAAa,CAAC,CAAC;EAEjC,oBACIO,OAAA,CAAAE,SAAA;IAAAI,QAAA,eACIN,OAAA;MAAKO,SAAS,EAAET,OAAO,CAACU,SAAU;MAAAF,QAAA,gBAC9BN,OAAA;QAAKO,SAAS,EAAET,OAAO,CAACW,YAAa;QAAAH,QAAA,eACjCN,OAAA,CAACN,aAAa;UAAAgB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChB,CAAC,eACNb,OAAA,CAACL,mBAAmB;QAACU,SAAS,EAAEA;MAAU;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5C;EAAC,gBACR,CAAC;AAEX;AAACT,EAAA,CAdQD,UAAU;EAAA,QAEGV,aAAa;AAAA;AAAAqB,EAAA,GAF1BX,UAAU;AAgBnB,OAAO,eAAeY,MAAMA,CAAA,EAAG;EAE3B,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;EACvD,IAAI,CAACF,WAAW,EAAE;IACd,OAAOxB,QAAQ,CAAC,QAAQ,CAAC;EAC7B;EAEA,MAAM2B,QAAQ,GAAG,MAAMtB,WAAW,CAAC,CAAC;EAEpC,IAAIsB,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IACzB,MAAMC,YAAY,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAC1C,OAAOD,YAAY;EACvB,CAAC,MAAM,IAAIF,QAAQ,CAACC,MAAM,KAAK,GAAG,IAAIJ,WAAW,EAAE;IAC/C;IACA,MAAMO,kBAAkB,GAAG,MAAM3B,OAAO,CAAC,CAAC;IAE1C,IAAI2B,kBAAkB,EAAE;MACpB,MAAMJ,QAAQ,GAAG,MAAMtB,WAAW,CAAC,CAAC;MAEpC,IAAIsB,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;QACzB,MAAMC,YAAY,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;QAC1C,OAAOD,YAAY;MACvB;IACJ,CAAC,MAAM;MACH;MACA;MACAJ,YAAY,CAACO,KAAK,CAAC,CAAC;MACpB,OAAOhC,QAAQ,CAAC,QAAQ,CAAC;IAC7B;EACJ;EACA;EACA,OAAOA,QAAQ,CAAC,QAAQ,CAAC;AAC7B;AAEA,eAAeW,UAAU;AAAC,IAAAW,EAAA;AAAAW,YAAA,CAAAX,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}